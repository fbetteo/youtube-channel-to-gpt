Video Title: *LIVE BUILD* Personalized Outreach AI Agent in n8n (No Code)
Video ID: fz1RduhHeks
URL: https://www.youtube.com/watch?v=fz1RduhHeks
View Count: 13,510

[00:00] okay so today I'm going to be doing a
[00:01] live build of an AI agent this agent is
[00:04] going to qualify leads and going to
[00:06] generate a personal message for each
[00:08] lead so don't want to waste any more
[00:09] time let's just get straight into
[00:10] building this one the first thing that
[00:12] you got to do is have a lead database
[00:14] set up somewhere so for today we'll be
[00:16] using Google Sheets we've got two leads
[00:18] here for Simplicity sake and information
[00:21] about each lead and this data is coming
[00:24] in from a Google form um your your
[00:27] potential leads would fill out this form
[00:28] and then you have to make sure that it's
[00:30] linked to a sheet that way it'll pop in
[00:32] here automatically and then your agent
[00:34] can qualify them so one thing to note is
[00:37] this form ends with this column right
[00:39] here anything else we should know and
[00:41] then before you hop into building this
[00:42] agent you want to add a column called
[00:44] rating a column called reasoning and
[00:46] then a column called
[00:48] Outreach this is just so an nadn it
[00:50] knows to populate these three columns
[00:53] with the information so um if that
[00:56] doesn't make sense right now don't worry
[00:57] as we get into building it you'll see
[00:58] exactly what I mean so back over to NN
[01:02] this first workflow that we're going to
[01:03] be building is a lead call tool so this
[01:06] is going to be the tool that the agent
[01:07] calls in order to qualify leads so that
[01:11] is going to be a trigger of when called
[01:13] by another
[01:15] workflow so the agent will call this
[01:17] tool in order to start the process of
[01:18] moving it through this
[01:20] logic second thing that we need to do
[01:22] here is grab a Google Sheets
[01:25] node um as you can see there's 10
[01:27] actions within this Google Sheets and
[01:30] we're going to do get rows in
[01:32] sheet now you need to set up your
[01:34] credentials for this node basically just
[01:36] telling n&n that it has permission to
[01:39] access information in your Google Sheets
[01:41] so if you click on docs right here it'll
[01:43] bring you to this page by NN and it will
[01:46] pretty much walk you step by- step how
[01:47] to get this set up with your credentials
[01:49] it's super simple um you're basically
[01:51] just going to sign in and you might have
[01:52] to set up your ooth consent screen but
[01:55] like I said that document will have all
[01:56] the information you need so we're going
[01:59] to do a sheet in the document and we're
[02:01] going to get rows and then we're going
[02:03] to choose the document we want that's
[02:04] going to be let's work together
[02:06] responses and then the sheet there's
[02:08] only going to be one sheet in here so
[02:09] it'll be form responses one then you can
[02:12] go ahead and click test step this is how
[02:14] we make sure that the information is
[02:15] actually reading into anent so as you
[02:17] can see we've got our information about
[02:19] John and about David right here so it
[02:22] populated in well now let's move on to
[02:24] the next step so we're going to add
[02:27] another node this one's going to be open
[02:28] AI
[02:30] a ton of different actions you can take
[02:31] once again we are going to do message a
[02:35] model you're going to have to set up
[02:36] this credential here so I'll show you
[02:38] guys exactly how you do this one you're
[02:39] going to click create new credential and
[02:42] you're going to have to grab an API key
[02:43] so over in open AI you're going to go on
[02:46] the left hand side find API keys and
[02:48] then you're just going to create a new
[02:49] key name it whatever you want and then
[02:52] once you do that it'll give you this
[02:53] value to copy copy that right there and
[02:56] then just going to paste that into Ann
[02:59] hit save
[03:00] and you should be good to go there
[03:03] connection tested
[03:04] successfully okay now you have to set up
[03:08] this node so we're going to do text
[03:09] message a model and then choose our
[03:11] model of GPT I'm going to scroll down
[03:13] and choose
[03:15] 40 okay and now we need to prompt this
[03:17] node what to do so this first message
[03:19] box here we're going to change this to a
[03:21] system prompt because we are telling the
[03:23] node what it needs to do and so I'm
[03:26] going to copy and paste in this
[03:28] information right here
[03:31] so you guys don't have to see me type so
[03:34] we're saying your task is to qualify
[03:35] incoming leads leads are a form
[03:37] submissions to a closed community group
[03:39] use the following criteria the first one
[03:41] is they need to be a decision maker who
[03:42] runs the company or at least has
[03:44] influence in the decision- making
[03:46] process and then the second criteria is
[03:48] we currently only want to work with
[03:50] companies with around 45 or less
[03:51] employees also known as company size
[03:53] which is how it comes over right over
[03:55] here as you can
[03:56] see so if a lead is qualified it will
[03:59] reply with qualified otherwise it's
[04:01] going to say not qualified super simple
[04:03] and then we just wanted to specify the
[04:04] format of Json to go to put the output
[04:07] into um so you guys can just copy and
[04:10] paste this exactly right here um I'll
[04:12] throw this in the description so it's
[04:13] easier but that's just how we want the
[04:16] um output to be formatted so that we can
[04:18] easily move it into the next node and
[04:20] put it back into Google Sheets so we're
[04:23] done with this one now we're going to
[04:24] add another
[04:25] message this one is going to be a user
[04:28] message and and this is just the
[04:30] information that we want this um open AI
[04:34] node to be using to qualify a lead or
[04:37] not so we've got name company size and
[04:39] decision maker and what we're going to
[04:41] do is grab in this information from the
[04:43] Google Sheets so on this left hand side
[04:46] for name we're going to drag in full
[04:48] name that jumps weird but we want it
[04:51] right there Name colon full name and
[04:52] then down here you can see how it's
[04:54] coming in so name John Richards same
[04:56] thing with company size we'll put that
[04:58] right here size 15 and then last but not
[05:02] least decision maker we'll grab that one
[05:04] from here and it comes in as yes I am
[05:06] the primary decision maker in the result
[05:09] tab so that's all we need to do for this
[05:12] node you can once again hit test step
[05:14] and we'll see how the data is coming in
[05:16] over here on the right hand
[05:18] side so the first one is coming in as
[05:21] qualified and the second one is coming
[05:22] in as not qualified this first one has
[05:24] the reasoning of the lead is primary
[05:26] decision maker the company size is
[05:28] within the threshold and this one says
[05:29] the company size is 100 which exceeds
[05:31] the limit of 45 employees so these two
[05:35] nodes are working that's awesome now
[05:36] we're going to add another one onto this
[05:38] open AI node what we want to do here is
[05:41] grab a data transformation and we're
[05:43] going to do edit
[05:45] Fields we're going to leave this one as
[05:46] manual mapping and then we're going to
[05:48] click here to add a
[05:50] field this one we're just going to name
[05:52] this field
[05:53] reply we want to change this to an
[05:55] object and then for the value we just
[05:58] want to grab the content basically the
[06:01] open AI node rated if it's qualified or
[06:03] not and we just want to grab that
[06:04] response so we're going to put that into
[06:06] the value here and then one last step we
[06:09] want to put in front of the dollar sign
[06:12] we're going to go
[06:13] json.parse
[06:15] open parenthesis and then behind content
[06:18] we're going to close the parenthesis
[06:19] oops close the parenthesis and it should
[06:21] go green that's how you know it worked
[06:23] and then you can see the result it
[06:24] should say object colon and then exactly
[06:27] what came out of the open AI node so
[06:29] test that step make sure it's working it
[06:31] should come out as a really clean um two
[06:34] different fields here qualified and
[06:36] reasoning so looks like that did its job
[06:39] perfectly okay next step here is we need
[06:42] to add this information that we just got
[06:45] the qualification status back to the
[06:47] original data so if we grab here pull
[06:50] over and now we want to add a merge
[06:53] node this merge node is just going to
[06:55] combine the data but we don't want to
[06:57] append it we want to combine
[07:00] and we're going to combine just by
[07:01] position so that's just saying the first
[07:05] um row of data from the Google Sheets is
[07:07] going to match with the first row from
[07:09] the open a Noe and just keep matching it
[07:12] down um and then you got to make sure
[07:14] that we drag in this right here to the
[07:17] merge node and then we'll go in here and
[07:19] test this
[07:21] step uh as you can see we've got the
[07:23] original data from the Google sheet
[07:25] scroll all the way over we should have
[07:27] our um qualifications set status so
[07:30] qualified not
[07:32] qualified okay so we're almost done with
[07:35] this tool already now we need to add
[07:38] another sheets node so that this
[07:40] information actually goes back into
[07:42] Google Sheets so we're going to choose
[07:44] update
[07:45] row same thing got to set up your
[07:48] credential and then we leave all this
[07:50] blank or
[07:51] default choose the document once again
[07:55] choose the sheet once
[07:57] again and now it's going to fetch the
[08:00] columns and we're going to match the
[08:02] columns on
[08:03] timestamp so it's going to match up the
[08:05] correct rows in your database and make
[08:08] sure that everything is sort of synced
[08:10] up and now we have to update the values
[08:13] so which which fields in our database do
[08:15] we actually want to change so time stamp
[08:18] is we're using that to match so we're
[08:19] going to drag in time
[08:21] stamp and the only thing we want to
[08:22] change here are those are those last two
[08:25] columns right here rating and reasoning
[08:27] so you can go ahead and just delete
[08:29] everything El out of
[08:30] here just to keep everything nice and
[08:32] clean so for rating down here from the
[08:36] reply node we are going to grab in
[08:40] qualified it will come through as a
[08:42] result of qualified or not and then for
[08:45] reasoning same thing we want to drag in
[08:47] reasoning so that we can see why a lead
[08:49] was either qualified or not
[08:51] qualified should be good to go with this
[08:53] node we'll hit test
[08:57] step and we will see see that it
[09:00] populated in
[09:01] here real quick we'll pop over to Google
[09:03] Sheets and we can see if it actually
[09:06] worked so yep John got qualified and
[09:08] David is not qualified with their
[09:10] respective reasonings right here so now
[09:12] we're going to move into the next oh
[09:14] wait no not yet one more thing we have
[09:16] to do is we have to add another edit
[09:22] fields and once again we'll leave it as
[09:25] manual mapping we're going to add a
[09:27] field this one's going to be called
[09:29] respon
[09:30] leave it as a string and then just say
[09:32] done for the
[09:33] value so the reason we have to do that
[09:36] is because like I said we'll tell the
[09:39] agent to qualify
[09:42] leads it's going to think how do I
[09:44] actually qualify leads it's going to
[09:45] send us off to this tool the data is
[09:47] going to start moving through this logic
[09:49] it'll come here it'll come here it'll
[09:51] parse through all this and then once we
[09:53] hit here and the information's actually
[09:55] updated in our Google sheet the agent
[09:57] needs to know that it's done so it can
[09:59] tell whoever prompted it hey we did that
[10:02] for you so this node sets the field of
[10:06] response which goes back to the agent as
[10:08] done it's really simple no need to over
[10:10] complicate it this is just how the agent
[10:12] knows that this tool has been executed
[10:16] okay so we got that saved we're going to
[10:18] go back and now we're going to make the
[10:21] um the personal message tool so add new
[10:26] workflow we're going to call this one
[10:29] personal message tool as you can see
[10:31] this means tool basically at least
[10:33] that's how I assign assign tools and
[10:36] agents same thing with the trigger we're
[10:38] going to do when called by
[10:44] workflow add a Google Sheets node and
[10:47] we're going to get row so this um this
[10:51] workflow is going to be very similar to
[10:52] that last one which is super nice
[10:54] because it's pretty much we're getting
[10:55] we're getting the information from the
[10:57] database we're doing something to get
[11:00] some sort of answer to put back onto the
[11:01] row and then we're actually putting it
[11:02] back onto the row so these two workflows
[11:05] are going to be very
[11:06] similar we got to grab the document once
[11:11] again test
[11:13] step and we should see actually the
[11:16] rating coming back so we've got
[11:17] qualified and not qualified
[11:19] here same thing open AI node message a
[11:24] model set that up with the key we just
[11:27] made um and and then we're going to grab
[11:30] a
[11:32] oops connection okay we should be good I
[11:34] don't know what's going on here we're
[11:36] going to grab 40 once
[11:38] again and okay now we need to system
[11:41] prompt this open AI node so I'm going to
[11:46] copy and paste this in here again so
[11:47] that you guys don't have to see it but
[11:49] here's what I said your objective is to
[11:51] write a personalized message to each of
[11:53] the leads output the leads preferred
[11:55] method of contact and when is the best
[11:57] time to contact them then provide a
[11:59] script that is personalized based on
[12:00] their company job title and what they're
[12:03] looking to
[12:04] automate if the lead is qualified then
[12:06] provide a message otherwise don't and
[12:09] then at the end I wanted to add these
[12:11] messages should be sent from Nate herk
[12:13] the company is 1 12 345 Corp and His
[12:15] email is Nate herk at blah this message
[12:18] shouldn't include any variables like
[12:20] your name or company name use the
[12:22] information I provided so I had to add
[12:23] this in here because when I was playing
[12:25] around with this agent it would put the
[12:27] message out with you know hey this is
[12:30] your name um contacting you from company
[12:34] name and we don't want it to be like
[12:35] that in case you know that just takes
[12:36] out or that makes you have to do a lot
[12:38] more manual work so we just wanted to
[12:39] get rid of that
[12:40] process okay so that is the system
[12:43] prompt now we need to once again add a
[12:45] new message this is going to be a user
[12:47] prompt and same thing as that last open
[12:50] Aon node we're just going to be
[12:52] giving this node the information that it
[12:54] needs so it wants to qualify or it wants
[12:57] to send messages based on um the name
[12:59] the job title what they're looking to
[13:01] automate and if they're qualified or not
[13:04] so again we're just going to drag in the
[13:06] information I don't know why it always
[13:07] does that the first time but we've got
[13:09] name John Richards job title he is the
[13:13] owner what do he looking to automate he
[13:17] wants to automate customer support and
[13:19] sales and then rating we'll drag
[13:21] in over here if he is qualified or not
[13:25] so let's test this step and see what we
[13:28] get
[13:32] okay so this first row is for John um it
[13:36] outputed this message I won't read this
[13:38] all right now we can read it later but
[13:39] it outputed the message because he's
[13:41] qualified and then the second um lead
[13:44] over here the lead is not qualified
[13:45] therefore no output is required so that
[13:48] step is working
[13:50] correctly so now we need to once again
[13:53] grab data transformation and edit Fields
[13:56] we're going to manual map add a field
[14:01] same thing
[14:02] reply um I think actually we can leave
[14:04] this one as a string yeah we can leave
[14:06] this one as a string and for the value
[14:09] we want to grab this information that's
[14:11] coming from the previous node so
[14:13] preferred method of contact email best
[14:15] time to contact morning and then the
[14:17] message below it we'll test this step
[14:20] and it came through
[14:21] nice and now once again we need to
[14:24] combine this new message with the
[14:27] original data set with the lead
[14:29] information so drag this over here we're
[14:32] going to grab a
[14:34] merge we're going to combine based on
[14:38] position o that's not going to work
[14:41] because we didn't drag the other input
[14:44] in so now we'll go in here and test this
[14:49] step oops okay we should
[14:52] see we got two records here and then at
[14:55] the end we've got the
[14:56] messages back associated with each
[15:00] record so next once
[15:03] again got to add a Google Sheets node to
[15:05] push this new information back into
[15:08] sheets so that's going to be updating a
[15:09] row in the
[15:12] sheet we'll set this up once
[15:15] again hopefully not too
[15:19] repetitive um so we're going to match
[15:22] again on time stamp so we'll drag that
[15:25] in and then we only want to update
[15:29] the message so we're going to get rid of
[15:31] everything else
[15:34] here except for outreach that's the
[15:36] column where the message is going to go
[15:37] and we just grab the reply throw it
[15:40] right in there and it comes through with
[15:43] the information we're looking for so
[15:45] test this
[15:48] step go into here and as you can see now
[15:51] in Google Sheets we've got the Outreach
[15:53] message for these two leads lead's not
[15:56] qualified so he got nothing this guy got
[15:58] a message
[16:00] and then can't forget of course we need
[16:01] to add the final set node so you can
[16:05] type in set edit Fields whatever you
[16:07] want to call it manual mapping add a
[16:10] field field is called response leave it
[16:13] as a string and the value is going to be
[16:16] done so you will save
[16:19] this and now we have the two workflows
[16:22] that we need we're going to go back into
[16:25] our project add a new
[16:27] workflow and of course it is time to
[16:29] build the agent so this one's called
[16:32] demo
[16:34] agent and we need to add the trigger so
[16:37] you can trigger it manually all these
[16:39] type of things we were doing when called
[16:41] by another workflow but this time we're
[16:42] going to do on chat message because the
[16:44] whole point is that we can ask the agent
[16:46] to do something and it will do it so
[16:49] we've got this trigger
[16:51] here um to add an agent you can either
[16:53] type in
[16:55] agent oops that's not how type agent
[16:58] agent or you can just go to Advanced ai
[17:00] ai agent it's going to be a tools agent
[17:03] there's couple different options um
[17:05] conversational is good for like customer
[17:07] support um but we want to do tools
[17:09] because it's going to be accessing
[17:10] different tools to do different
[17:12] jobs so we've got this and then we going
[17:15] add a system message this is just
[17:17] prompting the AI agent what to do I
[17:20] don't want to get too much into
[17:21] prompting right now let's just leave
[17:22] this as a helpful assistant because this
[17:24] workflow is not too complicated but yeah
[17:27] just leave that like that for now
[17:30] chat model I always use open
[17:33] AI with the model of
[17:36] 40 that's all we need for memory we're
[17:39] going to do window buffer memory so if
[17:41] you guys don't know what this node does
[17:43] it basically is just going to give the
[17:44] agent context of our conversation so if
[17:48] you ask it to do something and then it's
[17:49] going to respond and then you can ask it
[17:51] to do something and you may reference
[17:52] what just happened the agent will be
[17:54] able to remember remember five um chats
[17:58] basically
[17:59] that's the context that it'll have to
[18:00] work off of if you don't add this it'll
[18:03] basically just be question and answer
[18:06] reset question answer reset so it's
[18:09] super easy to just throw that in there
[18:10] so pretty much I just always do that
[18:13] okay so this is where the magic happens
[18:14] we're going to add the two workflows
[18:16] that we just built we're going to use
[18:18] this node right here call NN workflow
[18:20] tool to do that so this first one that
[18:23] we're going to do is the lead
[18:26] call and we'll just call it this lead
[18:29] call up here too just to keep everything
[18:31] organized and now you have to give this
[18:33] node a description of when to use this
[18:35] tool so super simple call this
[18:39] tool to qualify leads in the
[18:45] database so where is the workflow that
[18:49] we're calling here you can do by ID by
[18:52] or from list it's really nice that they
[18:54] let you choose just from a list here and
[18:56] we want to do the lead qual tool so set
[18:58] that up and then this is the response
[19:00] field if you remember at the end of the
[19:01] tools we set up that set field and we
[19:04] made the response
[19:06] field done so that's what it sees that's
[19:09] how it knows it's done so there's lead
[19:12] qual now we're going to do this same
[19:14] thing again this one is going to be the
[19:17] let's call it
[19:19] message going to put that in here as
[19:21] well and then same thing call this tool
[19:25] to generate personalized
[19:29] messages
[19:30] for leads and I'm actually just going to
[19:33] get rid of personalized that way it's
[19:35] it's a little easier when we ask the
[19:36] agent can you make messages for the
[19:39] leads we don't always have to say can
[19:40] you make personalized just to keep it
[19:42] easier so same thing from list we're
[19:44] grabbing the personal message tool and
[19:47] it's returning response
[19:50] so oops let's go ahead and save this
[19:53] agent and let's get to testing it so
[19:59] we're going to chat with it we're going
[20:01] to say oh first we need to get rid of
[20:05] this information to make sure it's
[20:06] working so we've got the two leads here
[20:08] with no information in the rating
[20:09] reasoning or Outreach column let's see
[20:12] if it's working so can you
[20:15] please qualify the leads
[20:19] in the
[20:22] database so it had to talk to chat to
[20:24] figure that out now it's using the
[20:25] leadqual tool so that's working well
[20:28] back to the agent it's going to go back
[20:29] to the model and it outputed to us all
[20:32] leads in the database have been
[20:33] qualified how can I assist you further
[20:35] so as you can see here we've got the two
[20:37] leads are qualified not qualified with
[20:39] their
[20:39] reasonings now we're going to go in here
[20:41] and say yeah of course let's um can you
[20:44] please uh make messages for those
[20:49] leads so he's going to talk to the model
[20:53] uhoh it's using the lead call
[20:56] tool that's not what we want we want it
[20:57] to use the message tool
[21:00] there we go okay so I think it was just
[21:02] making sure they were
[21:06] qualified back to the model back to us
[21:10] messages have been successfully
[21:11] generated how can I ass you further okay
[21:14] perfect so let's actually read this
[21:16] message now so this guy's qualified he
[21:17] got a message let's read this
[21:21] message so they
[21:23] said oh no what did I just do
[21:29] okay he said
[21:30] [Music]
[21:32] um preferred method of contact is email
[21:35] contact him in the morning the subject
[21:37] is transform your business process with
[21:39] 12345 Corp hi John Richards I hope this
[21:41] message finds you well my name is Nate
[21:43] herk and I'm reaching out from 12345
[21:45] Corp given your role as the owner and
[21:47] your interest in automating sales and
[21:48] support I believe our services can
[21:50] significantly enhance your business
[21:52] operations at 1 12 345 Corp we
[21:54] specialize in streamlining processes to
[21:55] improve efficiency customer satisfaction
[21:58] by automating customer support and sales
[21:59] we can help you save time reduce errors
[22:01] ultimately increase your bottom line I'd
[22:03] love to discuss how we can tailor our
[22:04] Solutions are you available for quick
[22:06] call later this week I'm generally
[22:07] available in the mornings okay so it was
[22:10] very personalized it sounded like I
[22:11] actually went in here and wrote this
[22:12] myself obviously this message can get a
[22:14] lot better as you prompt it differently
[22:17] as you give it information about your
[22:19] company and the services that you offer
[22:20] so you can give it access to that
[22:22] through you know a database a vector
[22:23] database whatever it may be um so this
[22:27] is just a super simp simple example I
[22:29] think I built this in you know maybe 20
[22:31] minutes so you can definitely make them
[22:33] better and better and as you add more
[22:35] leads one thing that I wanted to point
[22:38] out real quick is with this
[22:41] workflow this lead qual
[22:43] tool I think in an actual um application
[22:48] you would want to set this up not as a
[22:51] call from an agent you would probably
[22:53] want to set it up as a trigger based on
[22:55] Google Sheets so if we did sheet
[22:59] trigger down here on row added so if you
[23:03] added in this node what this would do is
[23:07] every time someone submits a response to
[23:09] your form it's going to pop into here as
[23:11] a new row and then this workflow will
[23:15] run automatically because it's being
[23:16] triggered by a new row so you'd set up
[23:18] the logic exactly the same you just put
[23:20] this right
[23:21] here and then you could probably get rid
[23:23] of this set field but you do the logic
[23:25] the exact same and then it would
[23:27] automatically
[23:29] immediately qualify them or not qualify
[23:31] them and you could do the exact same
[23:33] thing with the Outreach message but I
[23:36] just wanted to show you guys sort of how
[23:38] easy it is to build a tool and how easy
[23:41] it is to build an agent that can call
[23:43] these tools and just sort of open up
[23:45] your eyes to the capabilities of agents
[23:48] and what they can
[23:50] do so yeah um I hope you guys enjoyed
[23:52] this live style it it is good to and
[23:55] actually I'll show you guys one more
[23:56] thing real quick so
[23:59] when you're testing the agent you know
[24:01] obviously you hope to get no errors in
[24:03] the workflow but if you do you're going
[24:05] to go down to
[24:06] executions and then you'll see all the
[24:08] previous runs they'll be read if they
[24:10] errored so let's say we got an error
[24:12] with the personal message tool we click
[24:14] on
[24:16] view and this always takes way too long
[24:18] to
[24:22] load but once we get here this is the
[24:25] run that would have just executed so you
[24:27] can click and see exactly what's happen
[24:28] happening so you can see maybe you
[24:29] didn't prompt this tool right and
[24:31] something's coming out weird or you can
[24:32] see maybe you messed up the parsing and
[24:35] this is coming out as a a a weird object
[24:38] um the point is you can get in and find
[24:41] exactly where things are happening and
[24:44] go in and troubleshoot so yeah I think
[24:47] that's going to do it for this one um
[24:48] please let me know what else you guys
[24:49] want to see and if you sort of like
[24:51] these live builds or step by steps let
[24:52] me know too and yeah that's all so
[24:55] thanks guys