Video Title: Building a SaaS in 24 hours ‍— PART 2
Video ID: 1tcTrCQHz7M
URL: https://www.youtube.com/watch?v=1tcTrCQHz7M

[00:27] [ __ ]
[00:30] I just killed the Stream
[00:54] no I think
[01:05] God damn it
[01:06] if you press the wrong button on OBS it
[01:10] doesn't ask you to confirm
[01:15] so it got killed right away
[01:21] oh my God
[01:24] what a terrible mistake
[01:30] [ __ ]
[02:05] scream fast dream fast kill kill the
[02:09] Spring Fest as well
[02:16] that is so stupid God damn it
[02:23] okay okay
[02:25] we're back
[02:27] anyway
[02:30] um
[02:39] all right I'm gonna play around making
[02:41] some whatever weird stuff
[02:44] uh
[02:45] if I do this just just to check because
[02:48] I have a feeling that's the the air is
[02:50] very minor
[02:51] yeah I get it
[02:53] okay that's the weird part
[02:56] these function I think this function is
[02:58] actually the one that's wrong
[03:00] because
[03:01] I can get any URL for any buckets
[03:05] so if that is wrong
[03:08] if I could get a URL for a bucket that
[03:10] doesn't exist
[03:12] why is that it doesn't return an error
[03:14] that's very strange
[03:49] oh no actually no it wouldn't work it's
[03:51] a really config okay
[04:01] I do something like this
[04:06] maybe if I just remove these for fun
[04:08] let's see how that goes
[04:18] yeah same thing is happening so maybe
[04:20] that was I was wrong
[04:22] okay content type
[04:26] just enjoy the content
[04:35] image PNG so that should be okay
[04:54] this is driving me crazy
[05:06] no
[05:25] going on
[05:35] I have no idea if I killed the stream
[05:37] can you can someone confirm we're we're
[05:40] still live on the chat
[05:55] oh wow okay okay
[05:57] the message because okay okay
[06:00] we're using 2gbt times like this
[06:05] okay okay thank you guys
[06:08] uh I I would like to but I just don't
[06:11] know where to search actually I don't
[06:12] know where I am here
[06:17] I only I don't even know which
[06:22] which part is wrong
[07:31] God damn it we cannot approve
[07:38] the clothes it's three
[08:25] it's a really weird version
[08:34] um
[08:44] okay something else
[09:30] that's true the bucket policies uh
[09:33] they're here
[09:37] I think we we reviewed it together uh in
[09:40] the previous stream and it seems like
[09:42] it's it's there is no problem with this
[09:44] no we don't get any error or anything
[09:50] but for some reason so yeah the course
[09:52] we had courses working no problem so
[09:53] that's the policies
[10:19] can I give me more info
[10:24] there's nothing here
[10:31] [ __ ]
[10:44] in here
[10:46] good object
[10:56] that's the case
[10:58] I'll be blame for him being too uh
[11:00] rushing
[11:06] let's see
[11:07] the refresh
[12:07] it's three put object
[12:27] all right how about we edit that
[12:37] S3 put object
[12:59] what the [ __ ]
[13:10] Oh Come
[13:28] on here we go again
[13:43] I have no idea how to fix this thing
[14:15] Maybe
[14:41] intense
[14:43] agree with yourself from the request and
[14:45] use boot object in the request
[14:49] from the requests so
[14:55] removing
[14:57] LCL
[15:00] could you uh
[15:01] A700 and use put object in a request oh
[15:05] okay here for the sign URL
[15:08] that's this thing here
[15:17] yep
[15:21] yes and use put object
[15:29] and where would you where would you use
[15:31] put objects in that request if I'm
[15:36] if I'm at the right place here oh is
[15:38] that is that the thing
[15:50] you get when you make get request to
[15:52] sign you around
[15:56] make the guest request to sign you out
[15:58] so
[16:02] this uh I'm gonna make the guest request
[16:05] to send you real
[16:08] I think I'm confused
[16:19] by the same era
[16:21] so is it
[16:24] to get some requires
[16:31] it gets a regret request
[16:42] hey
[16:46] I'm not sure what if if we're talking
[16:48] about this function here the get sign
[16:50] URL
[16:52] I'm not sure how I could suit I could do
[16:53] that mircio
[16:58] I get parameter
[17:00] oh I see the bucket parameter okay
[17:04] removing the S7 requested newsput object
[17:06] in the request
[17:11] sign URL
[17:14] look at my bucket
[17:21] okay okay so I will remove basically
[17:24] content type and maybe not okay I would
[17:27] remove
[17:28] the Earth here
[17:31] fire ACL
[17:36] we just keep this one
[17:39] yes here okay
[17:41] give it a try
[17:46] you legit
[17:48] what
[17:54] you're beautiful to beat your weight
[17:59] no way I think we have it here
[18:06] dude thank you so much
[18:09] oh you're [ __ ] you're a lifesaver
[18:12] one hour bug removed
[18:15] ah lovely man
[18:20] [Laughter]
[18:25] that's the spirit building in public so
[18:28] anyone who was in the Stream earlier uh
[18:31] the bug was actually removed
[18:33] thanks to mircia just because we had
[18:35] this weird stuff here ACL that tastes
[18:38] public read is gone and now it's working
[18:44] whatever
[18:46] incomplete okay
[18:49] um
[18:50] okay this is super cool
[18:52] thank you so much buddy
[18:56] yeah so we're gonna go back to uh we're
[18:58] gonna we're gonna just upload PDFs and
[19:01] so normally in our database we have
[19:05] we have we have we have the the PDF that
[19:07] is updated and that is here okay we have
[19:10] the link to that AWS stuff
[19:18] okay we have that's thing
[19:22] um
[19:25] so now what we can do
[19:37] okay for these we're going to show it
[19:39] only if the
[19:41] uh what is it the data user
[19:46] user data that role equal teacher
[19:49] look at that thank you Mr gbt
[19:52] now you can have put my code
[19:55] damn it
[20:00] okay that will only be visible to the
[20:02] teacher
[20:08] and so if I'm a student
[20:11] I don't get okay yep
[20:13] and here we're going to have at least
[20:16] of all the PDFs that have been uploaded
[20:19] listed uh by
[20:23] um chronological order
[20:25] we're going to have another we're going
[20:27] to have to have a API function here PDF
[20:31] um post
[20:34] all right maybe I'll just get some
[20:35] screen okay
[20:38] um
[20:39] [Music]
[20:40] see here same we're going to here to get
[20:44] function for the PDF uh if there is no
[20:47] user
[20:49] we're gonna return
[20:51] you only and then we're going to do
[20:52] something like else if user we're going
[20:55] to add something to the user we're going
[20:57] to say as access
[21:00] it's going to be a type Boolean
[21:04] is going to be defaults
[21:07] by default people don't have access
[21:10] to the bloodborne
[21:14] and we're going to rerun server
[21:16] and here we're back if the user that the
[21:21] user doesn't have access we're not going
[21:23] to return any
[21:25] PDF
[21:30] please upgrade your subscription
[21:36] up
[21:38] here we're gonna catch to get get method
[21:41] here we're gonna say instance
[21:45] um
[21:46] PDFs
[21:48] I'm going to do we're gonna find all the
[21:50] PDF with a URL that's
[21:54] uh I think this is exists
[22:00] okay I'm going to ask your GPT and all
[22:03] the PDF at 8 30 that have
[22:09] [Music]
[22:11] runs in ports by creating
[22:21] okay
[22:23] and we're going to send and we're going
[22:24] to limit that to whatever in case she
[22:27] goes crazy and shared flows are going to
[22:28] limit that to 20 PDFs
[22:35] all right we're going back
[22:37] in here we're gonna have another
[22:39] function that's going to fetch
[22:42] uh
[22:44] user error
[22:59] um
[23:08] okay we're going to have those PDFs here
[23:11] that are
[23:13] PDF
[23:15] and this is going to be a get okay
[23:16] please upgrade your subscription of
[23:18] course that's means it's working so
[23:21] we're gonna say that the teacher has
[23:27] actually I'm gonna do it here
[23:31] no I'm gonna give her access okay
[23:39] Boolean
[23:42] yep
[23:53] on your side you should you should
[23:55] actually plug your Twitter ID that's
[23:57] legendary men
[23:59] I think the stream might not allow you
[24:02] to share a link but but go put on a
[24:05] hashtag something uh
[24:07] whatever at Mercia
[24:13] dude I have a newsletter coming tonight
[24:15] that is exactly about that topic
[24:19] um if you want to check it out say it's
[24:20] marklu.com
[24:23] City to you
[24:25] this thing here.com
[24:28] and you can get the newsletter that's
[24:30] gonna show up tonight okay right the
[24:33] chat is broken
[24:38] the user role teacher you don't have
[24:40] access
[24:41] um
[24:42] actually no I think that actually the
[24:44] links are actually broken
[24:46] well the whole chats is broken
[24:51] the whole chat is broken
[25:03] that's so weird
[25:06] oh no
[25:09] oh yes no no okay
[25:11] there you go is he broken I don't know
[25:13] actually
[25:15] kind of weird I managed to share the
[25:17] link
[25:21] no idea
[25:28] alrighty so
[25:30] so so yeah what we're doing so
[25:33] teacher will have access by defaults
[25:38] we have this here and then
[25:42] we're supposed to see all the PDFs
[25:44] somewhere oh I think we're gonna have to
[25:46] give a names to the PDF
[25:48] uh
[26:25] like this
[26:35] okay
[26:49] all right we have our first PDF yay
[26:54] um well give me one second I need to do
[26:56] a quick bathroom break
[28:37] alrighty
[28:39] back to it so PDS boom
[28:41] we have we're going to do we're going to
[28:43] do pdf.name or
[28:47] Korean book
[28:51] um I'm gonna give it a simple style like
[28:55] rounded LG
[29:00] G3 days 100
[29:05] .
[29:10] um boom go
[29:14] and we can have a button
[29:37] download button
[29:44] okay
[30:04] a mandatory
[30:10] called tray
[30:12] oh that was there
[30:15] here we go
[30:22] use a small
[30:36] I'm gonna be religious about that
[30:41] okay
[30:49] so we're gonna say unclick
[30:52] download
[31:00] and you're going to say pdf.url and that
[31:03] function here
[31:07] um I'm going to say
[31:09] function to done
[31:12] the
[31:13] DF
[31:15] I think it knows it
[31:28] let's see how that goes
[31:32] yep
[31:33] working
[31:35] okay
[31:37] our worry books
[31:48] oh I think I need to do that
[31:59] listen
[32:07] you know jtbt wow
[32:11] Legend
[32:16] Ah that's beautiful
[32:31] okay
[32:33] we have a list of workbooks
[32:36] um
[32:41] we have a list of our books teacher can
[32:43] upload users cannot see that
[32:50] um
[32:51] oh maybe we're gonna do something like
[32:53] this as well
[32:54] there's a way to mutate
[32:57] let me date here
[33:03] mutate PDF and here when we upload a PDF
[33:06] we're going to mutate
[33:08] that thing
[33:11] because we want to have the latest one
[33:13] so inputs file
[33:17] um file input
[33:32] okay we're gonna upload another PDF see
[33:35] how that works
[33:36] normally when we upload the PDF it
[33:39] should put it on the AWS create
[33:42] a record in the database
[33:46] and then oh Bingo it's working now and
[33:48] we have it here so we download
[33:52] take a little while yep
[33:55] and that's the wrong video but that's
[33:57] okay
[34:00] um
[34:00] [Music]
[34:05] okay
[34:15] next week so you go
[34:18] um
[34:21] okay
[34:23] uh yep PDFs
[34:26] here
[34:28] um what else do we need to do
[34:32] we need to add maybe a support button
[34:34] just in case
[34:36] button supports so normally that should
[34:39] be connected with the boilerplates
[34:41] which means we
[34:44] would have almost nothing to do with
[34:46] that
[34:51] they just use the URL that we've used
[34:53] before
[34:56] yeah
[34:58] margin top we're going to say 24.
[35:05] nope
[35:07] whatever if you don't like margin I'm
[35:09] going to throw a putting in there
[35:12] here's one of the work yeah that's gonna
[35:14] directly send an email to my wife
[35:18] need help with Korean yep see pretty
[35:21] feels it refills the stuff in here based
[35:24] on your app and stuff
[35:25] it's kind of a handy
[35:29] um
[35:30] teacher dashboard which is fine
[36:00] just a little label somewhere
[36:06] yep okay
[36:25] if a
[36:28] I think we're good we're good with that
[36:31] um
[36:35] okay so now we have to deal with the
[36:38] students think so teacher can open PDF
[36:40] PDF is uploaded oh yeah we need to send
[36:42] emails
[36:45] that's another story
[36:48] uh
[36:51] yeah we're gonna do okay we're gonna do
[36:53] this real quick
[36:57] dashboard
[37:00] um
[37:05] and Patch URL
[37:08] all right we're gonna do it when we
[37:10] create the rest so what do we patch a
[37:12] PDF
[37:13] here
[37:20] the meaning we observe the URL okay and
[37:23] then we're gonna have to send emails
[37:24] send
[37:27] emails to whole users
[37:32] that have access good LGBT
[37:36] um
[37:38] like should we do some magic
[37:41] yep not bad
[37:43] yeah you don't know what's following you
[37:45] need to import the send email
[37:49] so that's function here I'm using it's
[37:51] also something that comes with the sheet
[37:53] pass boilerplate it's here
[37:55] a little helper function that's already
[37:58] set up with what we did before
[38:01] you just throw some parameters in there
[38:03] and it's going to send an email to all
[38:05] the users
[38:06] to the users whoever you you put it in
[38:08] the loop
[38:10] um Loop
[38:13] for users and send emails one by one I'm
[38:18] doing this because uh
[38:21] I avoid broadcasting too many emails
[38:24] with melgan like avoid like sending 10
[38:26] emails in one second because she'll
[38:28] probably will never have over 30
[38:30] students or something that function will
[38:32] take like maybe the maximum 30 seconds
[38:34] to run
[38:36] um we get the user we send email that is
[38:39] nuts
[38:41] that is definitely not what's in the
[38:43] function so we're gonna have to go to
[38:44] the Belgian Library
[38:47] to subject and text so two
[38:50] so we have user email subject
[38:53] new Korean
[38:57] workbook
[39:04] hi
[39:16] beautifully available for you
[39:19] I'm gonna try to pretend to my wife so
[39:21] I'm going to use a lot of images
[39:24] here
[39:26] um
[39:29] I think I'm gonna do this config
[39:40] domain name okay yeah
[39:45] is the wrong config fight oh yeah
[39:54] config.domain name
[39:58] um and just yeah slash dashboard
[40:01] and that should be good
[40:04] um
[40:07] are we going to sign
[40:12] [Music]
[40:15] oh I know
[40:16] this has not been the three but I feel
[40:18] this is gonna be a nice saying
[40:22] a little bit of Korean in there
[40:30] hey
[40:32] I just made a PDF
[40:34] I just made a PDF available for you you
[40:36] can donate here
[40:40] and then finally we need the HTML
[40:44] version
[41:00] uh
[41:02] yeah dude
[41:06] I want your GPT save me yes
[41:11] I completed the Dominator pressure
[41:14] if that we can make it better here
[41:22] here OMG
[41:45] oh actually no what I do
[41:48] GPT no you messed up here
[41:51] this is not an object this is
[41:55] like this
[42:03] hey
[42:19] and then we're gonna say config that
[42:22] well again that's
[42:24] support meal
[42:26] we're gonna say we're just gonna say to
[42:28] reply directly to my wife's email for
[42:31] Simplicity
[42:35] wait
[42:39] did I get the wrong
[42:42] I get the wrong thing no no okay no it's
[42:44] not the wrong thing
[42:48] um
[42:55] config milk and support email config
[42:58] milk and support email
[43:01] okay uh shall we give it a little try
[43:07] so we save the PDF we access all the
[43:09] users we have access we send them the
[43:11] link
[43:13] by email
[43:15] and that should be good
[43:20] so normally I'm registered with my own
[43:23] email so yeah I should get it
[43:26] give it a try
[43:28] so sending this PDF
[43:34] it's going to upload the same exact same
[43:35] PDF see what's going on
[43:38] airplane yep that's erased oh I think
[43:41] it's probably
[43:44] oh maybe I [ __ ] up the
[43:48] another race
[43:53] um
[43:54] did we upload the PDF at least
[44:04] I think we did upload it
[44:06] 5 13 so yeah we uploaded the PDF
[44:09] and it has
[44:12] my name
[44:14] unauthorized
[44:56] I think I have an issue with ascending
[44:58] function
[45:00] an email maybe I just messed up
[45:02] we have the these are the parameters we
[45:05] send
[45:06] two subject text email
[45:10] to
[45:12] subject
[45:14] s
[45:16] HTML
[45:18] like that
[45:25] and we're going to re-upload
[45:32] pictures as well
[46:02] we did a [ __ ] up is it because they're
[46:04] occurring characters or something
[46:07] or did I mess up the
[46:15] did I mess up something
[46:30] damn
[46:31] [Music]
[46:36] what could it be what could it be what
[46:38] could it be
[46:41] oh maybe I don't have the form data
[46:49] I do have it
[46:53] I think I do have it too yeah
[47:20] or maybe there's something wrong here
[47:28] General email
[47:30] admin
[47:36] you're gonna go that should be okay
[47:43] it was probably my API key that's wrong
[47:45] I had to turn off the stream for just a
[47:47] minute
[47:49] you're standing next to the kitchen
[47:50] counter
[47:52] and actually
[47:56] no I'm adjusting my room
[47:59] um yes
[48:00] but it's uh it's a standing disk
[48:04] so
[48:05] pretty cool because I can stand and sit
[48:10] it's a good catch
[48:17] hello Mr Charlie
[48:30] yep oh yeah that's a good point
[48:33] actually yeah that's a really good point
[48:35] for the name of the fight uh
[48:37] maybe in the dashboard then when I
[48:39] create the PDF
[48:42] um
[48:43] create PDF
[48:46] stand name equal
[48:51] just do this
[48:56] and then here in the pity
[49:11] yeah that shouldn't make it
[49:13] all right let's try that works um
[49:18] away with a single stuck somewhere where
[49:21] was it oh yeah sending emails
[49:23] gotta check it I gotta turn off the
[49:25] screen for just a minute
[49:27] here we go I need to check what's going
[49:30] on in the in the mail gun thing
[49:38] well we've made some progress since this
[49:40] morning and I'm checking the tabs
[49:43] basically each tab of the browser tells
[49:45] where we were this morning it's like one
[49:47] chapter
[49:48] yeah
[49:51] setting API keys
[49:54] yeah of course there's no API key in
[49:57] Belgian so this is not supposed to work
[50:11] okay key here
[50:13] well again API key
[50:43] welcome back
[50:44] um so I think I fixed it
[50:47] let's see
[50:49] I'm gonna upload a new file and as
[50:52] artificially said normally it should
[50:55] also display the name of the file
[50:58] when we're gonna upload it
[51:00] do your sense Yep this is exactly it
[51:06] [Music]
[51:07] um
[51:15] remove extension
[51:23] oops
[51:33] look a little bit better and it normally
[51:36] boom I should have my screenshot
[51:37] downloaded
[51:43] yep
[51:45] Legend
[51:54] I'm using obs
[51:56] OBS software
[51:59] pretty straightforward that's what you
[52:01] actually see here that's the platform
[52:02] I'm using and I'm using also restream I
[52:06] think it takes my stream and I broadcast
[52:08] it to Twitch and Twitter Twitter Youtube
[52:11] It's kind of new to me so uh
[52:14] I'm a really beginner here and yeah I
[52:17] think yeah probably allow teacher to
[52:19] delete files um I think since it's just
[52:20] for my wife she's going to be careful
[52:22] with it
[52:24] um yeah that's it there was like a
[52:27] startup for
[52:29] um you know everyone then it's probably
[52:31] something yeah we should do
[52:34] okay it's working
[52:36] um I think we're gonna finish this with
[52:37] the subscription subscribe uh I might
[52:40] have to run in one hour or so so we have
[52:42] basically one hour to set up stripe
[52:44] subscriptions
[52:47] um
[52:48] let me think oh let's check if I got the
[52:50] email actually no I didn't get it
[52:54] if you'd end up in spam
[52:57] this is not okay no it didn't end up
[52:58] with that's a good thing
[53:03] or maybe I just didn't call the function
[53:04] what's going on
[53:07] um
[53:12] I have access right
[53:16] as access okay
[53:20] so we're going back to the where was it
[53:23] the PDF
[53:27] um
[53:36] so
[53:38] oh my God I'm getting tired
[53:41] I'm gonna finish that thing
[53:47] I said easily mute apdf so yeah that's
[53:49] functional PDF here we got a patch
[53:52] in the patch function we should be
[53:54] sending emails
[53:58] um I had no error so either this did not
[54:02] run or
[54:06] or I just didn't receive the email no
[54:09] it's not possible
[54:11] oh yeah actually I received it
[54:14] yeah but there we go
[54:15] let me try to show you guys what we see
[54:21] yes perfect
[54:23] anyone say oh
[54:24] I just made a PDF server you can run it
[54:26] here and then it goes it's not gonna
[54:28] work because it's using the live domain
[54:30] name yeah I'm supposed to go to the
[54:32] dashboard and I'm supposed to be able to
[54:34] download my PDF so this is perfect we
[54:36] have done everything we need to do on
[54:38] the teacher side
[54:40] so
[54:41] we're going to commit that thing
[54:45] and
[54:49] and we are going to be students now
[54:52] as a student I am I don't have access by
[54:55] default
[54:58] we're gonna try some
[55:02] please upgrade your subscription yes
[55:05] sitting dashboard I have a support
[55:07] button
[55:17] [Music]
[55:19] um
[55:21] yeah just to check if I have access
[55:22] normally
[55:24] I should be able to see all the PDFs
[55:27] yes I have all the PDFs I can do some
[55:29] homework
[55:30] this is good this is beautiful
[55:32] we're just gonna handle the non-payment
[55:36] non-paying subscribers right I need to
[55:38] sit five minutes
[55:40] I'm bringing you to my bed
[55:45] kinky stream
[55:57] foreign
[56:14] you can I I [ __ ] up the stream I turn
[56:17] it off in the middle so if you go back
[56:19] to my YouTube channel you'll see
[56:21] oh you're from twitch so maybe you
[56:23] cannot really see that
[56:25] uh
[56:30] yeah on the page Mark Lou wait
[56:34] oh shoot wait
[56:37] one second I cut myself this morning and
[56:40] I'm kind of bleeding a little bit
[57:05] brand new bed sheets turned red [ __ ]
[57:10] uh if you wanted to watch the stream
[57:12] from the start you can go to more
[57:14] clue.com there is my YouTube channel in
[57:17] there
[57:18] and then you can see the first stream
[57:21] and this one
[57:23] and for the domain names uh I like
[57:26] actually I would like to do that I just
[57:30] melgan and other platforms recommend not
[57:32] doing it they say whatever you can
[57:34] damage your reputation or something
[57:36] and uh
[57:38] I know that makes me kind of like a
[57:42] down thing about it but I think yeah you
[57:44] can I don't think you will have big
[57:45] issues I don't think if you're cautious
[57:47] it's it's a good practice to have a sub
[57:49] domain
[57:52] yeah feeling better just uh
[57:57] I put it on like a big plaster like you
[57:59] know that Meme you see on Twitter where
[58:01] the guy smash something on the big stuff
[58:04] and it's supposed to stop a leaking I
[58:06] kind of did this before the stream it
[58:08] worked for a couple hours but now it's a
[58:10] little bit leaking but it's all good and
[58:13] we have one hour to finish this
[58:15] subscription thing so we're gonna go
[58:18] back students dashboard
[58:21] um
[58:23] as a student so I will have
[58:25] wait uh we have I think we will need to
[58:29] listen to stripe web books we're
[58:31] listening to straightway books locally
[58:35] like Steve fixes all yeah that's it
[58:50] so yeah the student dashboard here will
[58:54] be very simple
[58:56] so instead of having
[59:00] me okay so
[59:08] let me think so we we have to show the
[59:09] PDF to the teacher and to the students
[59:11] who have access and if you are a student
[59:13] and you don't have access
[59:23] so maybe here we're gonna we can yeah
[59:26] because we have three use cases
[59:28] we're gonna do something like render
[59:29] contents
[59:34] yep
[59:36] render DF and that function here
[59:39] [Music]
[59:46] so e
[59:49] um user
[59:51] data
[59:53] dots rule
[59:55] that's user rule equal teacher
[60:00] or
[60:06] yeah actually I didn't have to do that
[60:07] but anyway
[60:09] or you should use your data dots
[60:13] user dots dot as access
[60:19] yeah I didn't have to do all that but
[60:20] anyway
[60:21] we're going to return which we just did
[60:24] so all the lists of all the PDF
[60:28] um
[60:28] [Music]
[60:30] yeah just making sure
[60:32] that confuse you okay the guides the
[60:34] other person doesn't have access so else
[60:39] let's say return
[60:43] it's basically going to be a paywall
[60:45] here uh
[60:56] let me think I think we need to show the
[60:58] pricing page
[61:02] yeah we need to see pricing with turn on
[61:04] and off
[61:06] choose monthly or weekly
[61:09] and we need to
[61:18] and
[61:22] have this
[61:29] and if you're nuts you're going to have
[61:33] something else
[61:41] if you don't have access and I think I'm
[61:43] gonna design a pay wall somewhere
[61:46] uh
[61:51] I think for that I'm just going to reuse
[61:53] what we built earlier
[61:55] well the the pricing components which is
[61:57] we're going to display it just a little
[61:59] bit differently
[62:06] I'm going to import the pickleball
[62:13] and we're going to show you instead of
[62:16] this 30 stuff we're going to show you
[62:18] the big wall
[62:29] this is it
[62:31] we're going to just make it
[62:35] we don't need to do this
[62:40] we don't need to do that as well
[62:47] I think why
[62:49] we do need to have to have uh background
[62:53] space
[62:56] um 200.
[62:58] foreign
[63:15] oh yeah okay this one is the wrong one
[63:21] so we have this thing uh
[63:26] and then yeah it should be a bit cuter
[63:30] is it Korean yearly monthly
[63:33] in the toggle
[63:35] just change a bit
[63:39] this should be 300.
[63:43] okay easy Korean mostly conversation
[63:47] we don't need to do that
[63:49] we don't do that we actually don't even
[63:52] need to do any of that
[64:00] um we can make this a little bit smaller
[64:08] I'm playing with the little stuff
[64:12] comprehensive
[64:15] [Music]
[64:19] all right so that is the pricing that
[64:22] people can pay
[64:25] um
[64:26] let's see how that looks on desktop
[64:34] how many tabs in here
[64:36] all right I need to change that real
[64:38] quick
[64:44] [Music]
[65:05] so that's the dashboard we're here
[65:09] um tell me how great your subscription
[65:12] okay and so normally
[65:16] I'm not logged in what is it oh wait
[65:21] maybe I just call the wrong thing
[65:24] and config
[65:26] oh yeah because I just have the wrong
[65:28] button here it's not the checkout button
[65:31] um
[65:33] well I'm gonna use another little piece
[65:36] of code from sheepfaster here
[65:42] uh where is it
[65:44] stripe I think no it is not no it's it's
[65:47] somewhere
[65:50] like hero no it's just a competent
[65:53] it's actually here
[65:56] but I just moved oh yeah I know I
[65:58] removed it
[66:00] that is not gonna work
[66:04] we need that function handle payments
[66:13] everything pressing pressing
[66:22] um
[66:28] so we're gonna have to
[66:32] we don't need to pass a price ID we just
[66:35] need to say
[66:37] I mean actually we can find the price
[66:38] idea
[66:39] we don't have to modify many things so
[66:41] the price ID is actually the plan dots
[66:43] press ID
[66:46] um
[66:49] deck and then the button signed in now
[66:53] is going to be a button
[66:56] it says uh they can reuse the same
[67:00] things inside
[67:02] just change
[67:06] the method
[67:13] of payments
[67:24] so
[67:30] I changed the wrong I changed the wrong
[67:33] components
[67:45] this is gonna take once again
[67:48] oh
[67:51] the man is tired
[67:53] Waits deck
[68:03] APA clients yep we just have to remove
[68:06] everything we did in the pricing lucky I
[68:09] did the commit before
[68:17] don't say that
[68:20] okay
[68:22] let's see what we get
[68:25] okay we have the stripe check out it's
[68:27] working
[68:30] um
[68:31] what is not happy okay the SVG oops
[68:33] bleeding
[68:41] [ __ ]
[68:44] join easy Korean the plans are working
[68:48] that's a very expensive one
[68:53] okay
[68:54] um
[68:56] so now we have to handle the strike
[68:58] events
[69:01] I remember struggling so so so so so
[69:04] long with those uh I came up with this
[69:07] basic setup
[69:09] available engine Fest as well
[69:11] um so when checkout session is completed
[69:14] I think whether it's a one-time payment
[69:16] or a subscription doesn't matter you're
[69:19] gonna get the events that's where you
[69:20] want to turn on the Boolean to tell your
[69:24] um
[69:24] API that you know that user has access
[69:27] so this is what I'm going to do here
[69:30] I think
[69:34] we get the customer idea
[69:41] should we create yeah I think we're
[69:43] gonna we're gonna do something safe I
[69:45] think here
[69:48] should we say
[69:50] um on the paywall
[69:52] should we pass
[69:56] a users wouldn't oh no we have users
[69:59] emails so we can pass that to stripe
[70:01] right away
[70:02] oh yeah that's pretty cool oh yeah
[70:04] because yeah yeah because yeah that's
[70:06] that's also the that's something that
[70:07] keeps I keep like questioning myself you
[70:10] can sometimes you want to have for
[70:11] instance on cheap fast people pay
[70:13] without creating an account so you
[70:16] create a checkout
[70:18] and you and on your API you have to know
[70:20] like how where did that like you know
[70:22] who is that user here because users have
[70:24] are logged in before uh we know who the
[70:27] user is so
[70:30] what we're going to do we're going to
[70:32] force we know their email already
[70:34] because they have to have one to get
[70:36] registered so what when we're gonna
[70:38] create checkouts
[70:40] we're going to pass an email
[70:42] um so where is that thing
[70:45] uh stripe coach codes
[70:48] yeah we're also going to add email
[70:52] to be user.email
[70:54] and then in our in our serp library when
[70:56] we create a checkout
[70:57] um
[71:00] where is it yeah
[71:02] and now we want to add these two email
[71:05] and because then here
[71:08] um I think here you have it if we have a
[71:09] customer ID we can just pass away write
[71:11] a customer ID
[71:14] I messed up a little bit this here
[71:18] if the user has if there's an email
[71:23] oh we pass on the user already okay okay
[71:25] yeah I was already doing it read the
[71:27] checkouts is
[71:29] oh yeah okay I just need to pass the
[71:31] user as it is
[71:36] press ID
[71:41] okay so we passed on the user if the
[71:44] user has an email we're gonna tell to
[71:45] stripe to use that email so when we get
[71:48] the data back from stripe in the web
[71:50] hook we know we just have to find the
[71:53] user with that email
[71:55] there's no way to be mistaken because
[71:57] stripe is going to force the user to use
[71:58] this email
[72:01] um so here if I'm not mistaken normally
[72:02] in the checkouts my email will be
[72:04] pre-filled
[72:05] there you go
[72:06] oops click the wrong link but yeah as
[72:09] you see here this is my email this is
[72:10] what I got because I was already logged
[72:12] in as a user
[72:13] and so
[72:15] when I'm gonna go to where is it
[72:18] the stripe QuickBook thing
[72:21] um I get the session back
[72:23] I have the customer ID that I'm gonna
[72:25] I'm gonna add to the user uh the price
[72:28] ID we all really don't care about that
[72:30] so we get the price in our front end so
[72:32] we from from our config file so we know
[72:34] whether it's a yearly or monthly plan
[72:36] but it doesn't really matter in our case
[72:40] um
[72:41] retrieve the customer in the user and
[72:44] user by idea
[72:46] yeah
[72:47] instead the email
[72:53] yeah
[72:54] so here that thing here it's supposed to
[72:57] have the customer.email
[72:59] so
[73:01] user ID we are not going to use it here
[73:03] this is a reference like a unique ID you
[73:05] can test in stripe to the checkouts to
[73:07] tell your back end your your web hook
[73:10] where it's coming from but we don't need
[73:11] that because we have the emails because
[73:13] the user is already logged in
[73:15] so we're going to say
[73:17] [Music]
[73:17] um
[73:20] e-customer.email we're going to find the
[73:21] user if there is no user we're not going
[73:24] to create it in that case because that's
[73:26] this scenario doesn't exist
[73:29] uh we're gonna throw an error if there
[73:30] is no email
[73:32] we're going to update the price ID I
[73:34] think stripe will give us the
[73:35] subscription ID it's been a long time I
[73:37] haven't worked with stripe subscriptions
[73:39] but I think it's supposed to give you to
[73:41] me uh
[73:44] wait maybe we're going to do well do we
[73:46] do we actually need it I think we don't
[73:48] even need it
[73:50] I'm just pricing custom ID maybe that
[73:52] would that would do the work
[73:54] um
[74:01] I should do the work so
[74:05] oh maybe we can also do this
[74:07] so I think user will have to input
[74:10] a name
[74:13] information email yeah name and card so
[74:15] we can do that so we can save the
[74:17] username
[74:18] which is pretty cool so oh yeah
[74:21] so what we can do
[74:23] when we broadcast to have higher chance
[74:26] to uh
[74:28] you read
[74:30] we can do this
[74:33] user dot name
[74:37] SEO
[74:39] user to name so that's a bit more
[74:41] friendly because thanks to stripe we're
[74:43] going to have those names
[74:46] um back to stripe so we have the name we
[74:49] have the price ID we have the customer
[74:51] ID we also want to say user dot as
[74:53] access
[74:54] equal true we save the user and that's
[74:57] it that's pretty much it
[75:00] um
[75:05] okay so we're go for now we're just
[75:07] going to do the typical use case
[75:09] scenario like the the one where
[75:11] everything goes well
[75:13] um we want users to have access to their
[75:17] their PDFs right away so we need to find
[75:19] a way
[75:23] this errors is is a
[75:26] what what is here clip
[75:28] that's bothering me
[75:30] so when they come back it might take a
[75:32] little while until stripes and the
[75:34] webbook and the API updates so we want
[75:36] to
[75:39] we want to refresh the page or something
[75:43] um
[75:44] but otherwise the data is not up to date
[75:47] on the front end so maybe what we can do
[75:48] is
[75:50] we can set a timeout or something that's
[75:51] going to refresh the data
[75:54] in the dashboard
[75:57] in the paywall we're going to say when
[76:01] we have a success with the payments
[76:03] we're just going to add success equal
[76:05] true
[76:07] right so that's we'll just let the front
[76:10] end knows that the payment was
[76:12] successful
[76:13] which means when we hear we can just
[76:17] check if success equal true we can say
[76:20] like oh in two seconds we mutate the
[76:22] data we refresh the front end
[76:24] and it's gonna check the user if the
[76:26] user has been updating it updated in the
[76:28] database and then you will be able to
[76:30] show the private data the PDFs
[76:34] so for that I'm going to use router
[76:39] constant
[76:47] so we will need to use state
[76:51] boom
[76:59] no
[77:01] um it sits in
[77:03] news
[77:05] paped
[77:08] set a
[77:11] note
[77:12] I use a fake um
[77:16] refresh mutate the
[77:21] commutate
[77:32] and mutate DF after
[77:37] three seconds if
[77:41] um
[77:42] if if
[77:44] the query parameter
[77:47] param
[77:48] success
[77:53] what do we have here
[78:02] [Music]
[78:03] bum
[78:04] [Music]
[78:07] that we don't need that much
[78:16] and then here we'll do something like
[78:18] toast dots
[78:20] remove the
[78:25] oh yeah I think I'll do that I'll say
[78:28] remove
[78:36] and then we need to remove it otherwise
[78:38] it's going to run independently
[78:45] come on gbt you were doing well so far
[78:52] uh I know you're gonna make me dig
[78:57] success
[78:59] thank you
[79:04] and then there
[79:06] remove
[79:08] I think we might have just
[79:10] if yeah
[79:12] we're gonna call this function anyway so
[79:14] we probably have to do it outside of
[79:16] this thing
[79:18] okay perfect
[79:22] normally just checking
[79:24] if I do success
[79:27] equal true
[79:35] and it's just going to remove it and
[79:37] then in three seconds I'm gonna make a
[79:39] call
[79:43] which means
[79:45] um which means we just have to make a
[79:46] successful payment now and see what
[79:47] what's going on so in the database user
[79:51] doesn't have access
[79:53] and we're listening to a stripe Web book
[79:55] events that separate from the dev server
[79:58] that's that's basically where stripe
[80:00] events are coming
[80:01] this is going to call this function here
[80:04] web look
[80:06] that's this one this is going to call
[80:08] this webbook function and we're going to
[80:10] add a bunch of stuff to the user
[80:12] let's give it a try
[80:26] Arc
[80:28] yeah let's pray
[80:29] I'm going to check if we get any error
[80:31] in here
[80:33] kind of things yeah
[80:49] those tribe what's going on
[80:56] that's Magic
[80:59] no errors
[81:01] um let's check we have the correct thing
[81:03] here
[81:04] the user in here you can see it has
[81:06] updated the customer ID the name so we
[81:09] can send emails
[81:11] um with their username the price ID to
[81:13] know which payment product ID was used
[81:17] on stripe and that's pretty much it
[81:21] um
[81:22] so now we need a way for users to cancel
[81:24] their subscriptions and I think for that
[81:25] we're going to use the words
[81:30] Mark is tired come on in
[81:33] um we're going to use the portal the
[81:36] customer portal so we're going to add a
[81:39] um
[81:40] you're gonna add on the dashboard we
[81:42] have the user data here so we can just
[81:44] use that we just need the customer ID
[81:46] actually we don't even need it because
[81:48] we can fetch from the database anyway I
[81:50] think we might have I might have built
[81:53] that in sheetvest already let me check
[81:58] total
[82:01] we do have the customer portal
[82:03] bingo
[82:05] pretty cool
[82:06] um sending myself some flowers yes what
[82:10] a nice Library
[82:11] let's try maybe we're going to say uh
[82:14] check
[82:15] um check the portal
[82:17] GS
[82:23] creature catalogs what is the name of it
[82:26] create customer portal okay
[82:29] um
[82:32] well we don't need any parents we just
[82:34] need a URL it clicks the button it makes
[82:37] a request it just send back the URL okay
[82:39] we don't need any of that
[82:41] actually you can actually be a get
[82:43] function no params we get the user
[82:47] I don't care about that we do customer
[82:52] total URL
[82:56] we use this function
[82:58] [Music]
[82:59] I'm going to send what are the
[83:01] parameters we need again return
[83:04] customer ID which is user customer ID
[83:06] and the return URL
[83:08] would be
[83:10] um
[83:13] would be would be would be would be
[83:16] simply config that
[83:19] well I think
[83:21] the front end has to tell me
[83:24] yeah the front end will set this up just
[83:26] like we need for
[83:27] think for the checkout
[83:30] payments handle payments
[83:34] uh
[83:37] where's the function again
[83:40] oh no it seem to pay will yeah
[83:43] yeah we're going to do the same here
[83:46] we're going to say
[83:49] oh so we will need to do a buddy
[83:52] post request and say
[83:56] 30 dots I'm going a bit fast here uh
[84:01] it's getting late so I might skip some
[84:04] testing and stuff like making sure the
[84:06] variables are included in the requests
[84:08] or something I return URL
[84:13] any back so that should create a
[84:15] customer portal and then here on the
[84:17] front end we're going to create a
[84:19] something called
[84:20] nope
[84:21] button uh portal.js
[84:26] it's going to be area components and
[84:28] we're going to say
[84:29] maybe like in the paywall
[84:32] I'm gonna have
[84:33] these function
[84:36] we don't care about that
[84:38] um
[84:42] new state I don't care
[84:44] gonna be loading return we need the
[84:46] return URL so
[84:54] up we don't need any of that subscribe
[84:57] we're gonna say uh check portal or set
[85:00] portal what did I say check portal
[85:03] API clients we need it as well import
[85:06] API clients
[85:08] return URL
[85:11] n is going to ship
[85:17] throttle and this is going to be a
[85:20] simple button
[85:21] with an unclick function
[85:27] handle portal
[85:33] 10 button
[85:35] neutral
[85:40] um manage payments
[85:42] and because we are friendly we're going
[85:45] to display a QD icon
[85:47] oh wait no okay yeah
[85:51] I gotta be rewarded for
[85:54] working hard so we're gonna use a cute
[85:56] icon like this
[85:59] that is absolutely useless
[86:04] but
[86:05] we deserve it
[86:14] and feel
[86:17] um I think I think it knows maybe
[86:20] let's see
[86:26] yep going back to the dashboard import
[86:29] that thing
[86:32] import button portal
[86:34] I'm going to put it uh where should we
[86:37] put it
[86:38] next to the support Maybe
[86:42] next with your Port all right
[86:45] that would make sense simple UI
[86:52] [Music]
[87:05] we're going to just reuse the same
[87:09] as that uh
[87:12] Finance payments I feel what is its
[87:16] primary
[87:17] is the primary
[87:19] fix primary content
[87:22] is it no it's not
[87:24] forget what it is
[87:37] [Music]
[87:44] X primary content text
[87:48] as it takes space contents here we go
[87:51] but an SM and we're going to do on the
[87:55] CH dashboard we're going to say
[87:57] legs right and Center just in case
[88:04] and because we want to keep that super
[88:07] cutie pie Style
[88:09] I'm gonna say bubble
[88:12] speech is here
[88:21] we're gonna use
[88:28] button support we're gonna customize it
[88:30] just a little bit and this is this is
[88:32] really useless but I think
[88:35] I think that that would make
[88:38] me happy
[88:42] because that
[88:55] path okay
[88:58] all right so we have two cutie pie
[88:59] buttons on the bottom
[89:03] um
[89:05] this thing let's try we click open the
[89:08] customer report yep it's working so yeah
[89:11] here the user knows I mean the the back
[89:15] end knows let me show you on a bigger
[89:16] screen Maybe
[89:19] uh
[89:21] I can knows where
[89:24] who the user is so it knows its customer
[89:26] ID
[89:28] um it calls that create portal function
[89:30] I can update my credit card cancel my
[89:33] plan I think I cannot pay
[89:36] maybe in stripe I can set up something
[89:38] where I can decide to upgrade to pay
[89:40] yearly probably
[89:43] that would make sense
[89:44] I can cancel the plan and that's the
[89:46] event we have to listen to because we
[89:50] want to turn off access to users
[89:53] and so
[89:56] we're just going to go to the web parts
[89:59] it's not the web Hook is it it's not
[90:02] oh wait no that's not it let's try
[90:10] let's
[90:13] hey Google
[90:14] turn on the bedroom lights
[90:18] oh I'm curious how many of you on the
[90:20] stream got their bedroom lamp
[90:23] or whatever lamp turned on because I say
[90:26] that
[90:27] the other time on the stream this
[90:28] happened
[90:43] yep yeah
[90:45] yeah just copy past those make sure your
[90:47] copy as a
[90:48] as SVG
[90:50] and then you can just pass them and
[90:52] format to GSX and boom you're ready to
[90:54] go
[90:55] okay apparently I'm the only one with
[90:56] the Google home here
[90:59] and um what happened sorry I I got a
[91:03] drained away from the chat but the
[91:05] um
[91:07] what is it
[91:09] um interrogation Mark success equal true
[91:12] is to you is because when so when we get
[91:17] user comebacks from the checkout session
[91:21] um we have no idea yet on the front end
[91:23] whether the user has paid or not or
[91:25] whether the data has been updated on the
[91:27] back end uh because it takes some time
[91:29] for try stripe to send the events to
[91:32] your server
[91:33] so uh what you want to do is if you
[91:36] directly make a call to your API that
[91:38] says like you know uh does the user have
[91:40] access your API might answer no and then
[91:43] if you ask in one second the API might
[91:45] answer yes so the that thing the query
[91:49] success equal true is that if it's in
[91:52] the query param after three seconds I'm
[91:55] gonna check the database I'm going to
[91:57] refresh the user data and say you know
[91:59] have access
[92:01] that's just the the gist of it
[92:08] do you use any templates
[92:10] um
[92:11] no I don't I do not use any templates I
[92:14] have a bunch of components that I've
[92:15] made like hero sections uh like pricing
[92:19] components pricing sections fiq and all
[92:21] that
[92:22] and that's pretty much it and I reuse it
[92:25] for my projects and also I bundle bone
[92:28] I never I was never able to pronounce
[92:30] this word I bundle all those components
[92:33] in the cheapest boilerplates so once you
[92:35] get the baller plate you get something
[92:37] like 10 or 15 15 components
[92:44] all right so here we go we are where we
[92:48] just want to go through the webbook part
[92:49] of stripe now to end all try
[92:52] cancellations
[92:55] um
[92:55] where is it
[92:59] wait I have 30 minutes left to go so
[93:01] maybe we don't need to do this uh
[93:04] because that's honestly it could be a
[93:05] bit boring I think I might just show you
[93:07] how to do it and then we can move on to
[93:09] deploy and go live because I think
[93:11] that's a bit
[93:12] more complete we have something to show
[93:15] at the end it's cool
[93:16] um
[93:18] let me let me wrap this real quick uh
[93:22] we go to stripe here
[93:25] um these events the customer
[93:26] subscription that deleted is the events
[93:29] you can handle your
[93:31] logic so when I cancel the plan as a
[93:34] user
[93:35] stripe will send these events it depends
[93:38] on how you configured your settings
[93:41] sometimes you um you cancel plan right
[93:43] away you're gonna get the web books
[93:45] sometimes I think it's delayed because
[93:46] the the plan you can sell the plan now
[93:49] but you paid for a month so you're gonna
[93:51] get I think the Web book in just a month
[93:53] from now or until the end the whole
[93:55] subscription period
[93:57] but anyway that's the part that you
[93:58] would use
[94:00] um as a business owner to turn on off
[94:02] the subscriptions for users and you
[94:04] would say something like user dot has
[94:07] access equal tools
[94:10] that's pretty much it
[94:12] um
[94:13] yeah you could you could go deeper into
[94:15] Stripes you could uh you know like for
[94:18] instance the subscription has been
[94:19] updated
[94:20] um you I think in this even you will
[94:22] receive something like subscription
[94:24] cancels soon so cancels in like 15 days
[94:28] and you could say it's like you here you
[94:30] could say like oh you send an email like
[94:32] oh oh I saw you just cancel your
[94:33] subscription you mine um you know giving
[94:35] me one reason that you cancel so I can
[94:37] improve the app for you or you can show
[94:39] a badge on the dashboard that says
[94:41] subscription console soon or something
[94:43] like that
[94:44] it's pretty much the gist of of stripe
[94:46] those four events
[94:48] like those three and this one are I
[94:52] think the most important one you can uh
[94:54] play with
[94:55] when I come in that
[94:58] and I think
[95:00] I think I'm gonna set up the config
[95:01] environment variables and we should be
[95:03] good to go if there's anything on the
[95:05] Stream
[95:07] um that you guys want to go over if you
[95:08] have any question uh
[95:11] prefer to drop them here
[95:14] and I'll be happy to to help
[95:18] and I'm shipping neighborship how do you
[95:20] find IDs
[95:25] and please
[95:27] um Wayne cool there we go I think it
[95:30] would be hard to give you a short answer
[95:32] but I I am literally sending a
[95:36] newsletter tonight
[95:38] for exactly about that topic how to find
[95:40] startup ideas if you want to get it
[95:42] um markshloo.com I just sent aside so
[95:45] you can subscribe to the newsator and I
[95:47] think it's sending in
[95:48] three hours or so two hours maybe or
[95:50] something so you can you can get it
[95:52] there
[95:58] yeah artificially that's 100 possible uh
[96:01] in that case you will receive an email
[96:03] with a wrong name
[96:10] all right
[96:12] I think we're good for the app I think
[96:14] I'm gonna push this live
[96:19] this is not what I was intending to do
[96:22] um yeah
[96:23] if you're tuning in right now if you
[96:25] were sleeping when we get started uh we
[96:27] made this little website it's not the
[96:28] most beautiful side but it's uh it's
[96:30] functional
[96:32] um it's for my wife who is a Korean
[96:34] teacher and this is for her students to
[96:37] download language and materials so they
[96:39] can practice grammar and stuff like
[96:41] using PDFs
[96:42] we made some testimonials we added some
[96:45] cute svgs we have this components that
[96:48] shows oh I need to fix that
[96:50] more testimonials features the pricing
[96:54] you have a yearly and the monthly
[96:56] pricing and some more testimonials you
[96:59] can join and sign up so here it would
[97:02] just send an email through melgen
[97:05] um and then once you're logged in you
[97:07] have access to all the PDF here you can
[97:09] download them you can play with them you
[97:11] can go to your portal and unsubscribe if
[97:14] you don't like the service and if you're
[97:16] not subscribed there is a big oh I need
[97:18] to find this
[97:20] that cut me short
[97:22] uh where was that button I think portal
[97:25] it's cool
[97:27] the return URL
[97:32] okay so in the check portal I think the
[97:36] return URL adds something yeah
[97:38] yeah we just shouldn't say buddy the
[97:40] return URL
[97:51] so if I go I try just right again making
[97:53] sure I don't shape bugs my wife up
[97:57] okay it's working now
[97:59] um yeah that's pretty much it uh we're
[98:01] gonna go we're gonna so we're gonna
[98:02] deploy that thing on Virtual I think
[98:04] it's already there I just needed to add
[98:06] some company variables I need to set up
[98:08] stripe
[98:10] um
[98:11] yeah I need to set a stripe
[98:14] let's go over this wait is that yeah
[98:17] that's the one okay
[98:20] hey Google
[98:22] bedroom light brightness to 100 percent
[98:28] bedroom light color to white
[98:33] all right
[98:34] just once again I'm turning off uh I'm
[98:37] just showing my face I need to check the
[98:39] variables
[98:53] oh yeah we'll need to set up a mongodb
[98:55] database as well
[99:03] all right so I'm almost there
[99:06] um
[99:08] it's easy
[99:10] korean.com
[99:22] really really really almost there uh
[99:25] melgan mongodb is wrong so I need to
[99:27] change that
[99:29] right keys
[99:33] API
[99:37] we have published in here
[99:42] secret key
[99:49] so yeah I need to create a second secret
[99:51] key okay
[99:52] well actually I could have used
[99:56] shirt card yeah
[99:59] um
[100:01] right
[100:14] we're gonna call it 1G
[100:20] currently I'm setting up stripe
[100:22] environment variables for the production
[100:24] thing
[100:28] that's why I'm just hiding my screen
[100:30] real quick
[100:32] now also so that we've already done it
[100:34] before so there's no nothing crazy
[100:37] I will show you as well how to set up
[100:39] the mongodb
[100:41] um virtual reversal actually has an
[100:44] integration that's pretty sick I think
[100:46] it does it for you automatically
[100:48] and then the webbook we need so yeah
[100:52] same for
[100:54] the the same thing as uh
[100:58] was it
[100:59] when you said subscribe you also want to
[101:01] add an endpoint for your Web book this
[101:03] is where it's going to eat the the there
[101:06] will be like the request will be sent
[101:08] this is what I'm doing right now is he
[101:11] Korean
[101:13] cool slash API Etc
[101:20] um
[101:21] current version latest API
[101:28] checkouts
[101:36] should create it deleted
[101:41] and subscription customer subscription
[101:44] updated customer subscription deleted
[101:46] for events we're going to listen to
[101:49] those ones
[101:51] the transition completed so that's okay
[101:56] just get
[101:58] okay
[102:05] my book up
[102:08] AWS key we're okay
[102:10] and all right
[102:14] about to be back
[102:18] what do you use for [ __ ] hosting [ __ ]
[102:21] hosting I use advanced
[102:24] I'm gonna actually I'm gonna do it live
[102:26] with you right now so I believe there is
[102:30] an integration for for that uh where is
[102:33] it
[102:35] yeah so this is reversal
[102:40] and I'm going to create a new DB
[102:42] somewhere
[102:44] a little cluster for my wife
[103:01] you get 15 minutes to finish this thing
[103:04] uh I think I believe I have to create
[103:07] one
[103:08] first yeah I think I have to create one
[103:11] I'm gonna delete easy Korean
[103:15] project owner
[103:21] and normally they have an integration
[103:23] between Atlas mongodb and reversal so
[103:27] once my cluster will be deployed
[103:29] I'll be normally I'll be able to
[103:32] uh just click a button and it's going to
[103:34] link it with
[103:37] all right we might change the password
[103:39] and I this here real quick
[103:44] how to generate password
[103:48] actually do I need to create a user
[103:50] maybe I do need
[103:52] one second I'm just finishing this
[104:04] all right
[104:06] when did you start shipping I think uh
[104:09] that's it
[104:10] it's a long story I did start six years
[104:13] ago or something
[104:14] in the very wrong way uh like literally
[104:18] keeping my ideas private and spending a
[104:21] year on apps and stuff
[104:23] and did a bunch of [ __ ] that never
[104:27] worked and I about a year and a half two
[104:30] years ago I started the journey a bit
[104:32] better on Twitter like seriously sharing
[104:35] everything building in public
[104:36] and then yeah and then things work much
[104:39] better for that after that
[104:47] all right so the cluster the database uh
[104:51] is here it's deployed working
[104:54] uh we have it here oh we don't have it
[104:57] here
[105:02] let's see it here
[105:04] oh yeah okay it's not linked we have to
[105:05] link it so I'm going to link uh
[105:09] easy Korean if I find it yep can I link
[105:13] this with my so my cluster the one I
[105:15] created with easy Korean that's my
[105:17] virtual app
[105:19] that I have to make the these
[105:22] make sure it's public and then normally
[105:25] if I go back to Virtual
[105:27] in here in my settings and environment
[105:30] variables I should have if I refresh
[105:33] maybe or if it's connected
[105:36] yep the mongodb created that thing for
[105:38] me and so normally I think I believe I
[105:41] have to restart the deployment server
[105:42] I'm not sure I'm gonna do it anyway
[105:47] uh while it's restarting I will set up
[105:50] stripe products
[105:52] so we're gonna go back I think
[105:55] the price will be the um let me think
[106:01] yeah
[106:03] I do not need coupons then
[106:08] right
[106:14] oh yeah no it's in the lead
[106:19] I think I'm not gonna show any discount
[106:21] which yeah
[106:24] yeah remove discounts
[106:30] I'm gonna push this so we didn't have to
[106:32] redeploy but anyway uh so now I'm gonna
[106:35] go in test mode Universal and I'm gonna
[106:37] add some products
[106:38] uh I'm gonna add easy Korean so that's
[106:41] my wife's platform's name
[106:44] and then take her picture
[106:48] Korean made easy
[106:54] that's a startup practicing it starts at
[106:56] 99
[106:57] USD recurring monthly and this is a
[107:02] default price so we're gonna have
[107:03] another price which is 9.99
[107:05] for a yearly billing
[107:09] could I trade that thing and then we're
[107:11] gonna finish real quick
[107:13] with the setup
[107:15] so there are a few things you want to
[107:16] set up as well when you're on stripe I
[107:20] think that
[107:21] uh I think that helps like versus you
[107:24] could upsell a monthly plan to a yearly
[107:27] plan
[107:27] uh for that you just have to click I
[107:29] think one button somewhere and then on
[107:31] the checkout page even though users will
[107:33] choose the the monthly plan
[107:35] they would have like a little nudge that
[107:37] they could upgrade to the yearly one
[107:39] took more discounts that's pretty cool
[107:42] so I believe yeah
[107:44] in the cheapest boilerplate I did I
[107:47] explain everything in here
[107:49] um I tell you you know where to go how
[107:51] to get your API keys and all that I
[107:53] believe I also did some extra stuff
[107:55] about oh the how to manage the payouts
[107:58] in this mode yeah
[108:01] do extra things to set up for the
[108:03] customer photos and stuff um we need to
[108:05] get the price ID
[108:07] I can fit them
[108:10] in here up
[108:13] and this is really
[108:17] update price
[108:21] oh I beg you something very important
[108:24] when you get uh live with stride for the
[108:28] first time check out uh where is it
[108:31] payments and go to go to payment
[108:35] Road and risks
[108:37] where is it and rules check that thing
[108:41] really carefully because
[108:44] deep sometimes with a date on stripe
[108:47] they enable or disable Rules by defaults
[108:50] and it was about a year and a half ago
[108:52] one of my rule was not this one here
[108:55] block if CVS CVC verification fails
[108:59] which means like anyone with your credit
[109:01] card number
[109:02] would pay anything online without
[109:04] knowing the three digits at the back
[109:07] so these by default at some point in
[109:10] stripe was not enabled which means uh
[109:13] anyone could just make a payment on your
[109:15] sites on the behalf of someone else just
[109:17] using the credit card
[109:18] um without doing the CBB CBC and so I
[109:22] remember I set up a stride business I
[109:23] shared it on Twitter and then I got a
[109:25] couple visitors and then suddenly
[109:28] extending to see payments and I was like
[109:29] wow this is cool this is the it's
[109:31] happening the journey is happening it's
[109:32] something and then at that time I was
[109:36] new to stripe so I I didn't I didn't
[109:38] know
[109:39] you know I I had no idea what was
[109:41] fraudulent payments I had no idea
[109:43] someone could actually use someone else
[109:44] credit card to make payments on my site
[109:45] so I was like oh this is so cool it's
[109:47] working so I did not refund the person
[109:49] and after I think a day or 12 hours
[109:52] something like I received emails from
[109:53] stripe that say that uh something weird
[109:56] is happening in my account and someone
[109:57] is reviewing it then 24 hours after I
[110:00] received another email and I will keep
[110:01] this email forever
[110:03] because I have my life on stripe and it
[110:05] says like you've been banned from the
[110:07] platform and there's no way
[110:10] you know you you get your access back
[110:12] and I did some research and I finally
[110:15] understood that someone else used
[110:17] someone's credit card and the person who
[110:18] got the credit card stolen just charge
[110:20] it back on the payment he made on my
[110:21] site I was like I was like literally
[110:24] [ __ ] with that because stripe is you
[110:26] know was like if you [ __ ] up with
[110:27] stripe then you have you can do other
[110:29] platforms but it's it's total mess and I
[110:31] already had some other businesses
[110:33] on stripe and they will freeze
[110:35] everything so uh I shout out I I try to
[110:38] um argue with them by email and nothing
[110:40] happened
[110:41] um they literally said this is over
[110:43] and for some reason
[110:46] I shared on Twitter and I was like upset
[110:48] and and someone from scribe reached out
[110:51] and they say okay we're gonna have a
[110:52] deeper like a thorough look at it and I
[110:55] think they saw that my account was legit
[110:57] I was not trying to scam people or
[110:59] anything because I have other stripe
[111:00] account that makes money and with legit
[111:02] credit cards and stuff and I got
[111:04] accepted back on the platform but that
[111:06] was a really weird feeling so long story
[111:08] short check out that you have at least
[111:10] the three rules enabled and make sure uh
[111:14] I don't think this one yeah never
[111:15] disabled this one but yeah if you're
[111:17] getting started that could make sense to
[111:18] have the three enable here I have two
[111:20] Atlas
[111:22] yeah just to be sure and if you see any
[111:23] payments that's like that sounds weird
[111:26] like you have an email that is like 777
[111:30] like or mmm like random emails that are
[111:33] weird like nuts looks like a real legit
[111:35] email
[111:35] just uh reform because
[111:40] it's a percentage of payments that you
[111:43] get that can get you banned so if you
[111:45] get a thousand payments and you have one
[111:46] dispute it's okay but if you have a
[111:49] thousand if you have like five payments
[111:50] because you're getting started which we
[111:52] all start at some point
[111:54] and and among one of them someone
[111:56] charged back
[111:57] this is literally killing your stripe
[111:59] account because it makes your charge
[112:01] um
[112:01] your this speech rate to like something
[112:04] like 20 something and this is really bad
[112:07] sorry that was my my uh frustration for
[112:10] a year ago coming back but at least if
[112:12] uh that could be helpful for someone
[112:13] else so the price is set up
[112:16] um
[112:16] I think we actually this should be
[112:18] working we've set up the price uh
[112:22] do we need yeah we wanted something cool
[112:23] we do here
[112:25] is it Korean uh what we can say
[112:30] for the payment link I think we can say
[112:32] it upsells
[112:33] I remember there was something like
[112:35] upsells maybe it's not here it's in the
[112:38] customer portal
[112:41] oh yeah there you go when you go to that
[112:43] price stripe knows that these can be
[112:46] upselled to that 99 a month
[112:49] and this is pretty cool
[112:51] that will help you a little bit so we're
[112:53] gonna go to easy korean.com
[112:59] and yeah so that site is here the site
[113:00] is ready
[113:01] uh and I'm going to be testing live Bass
[113:04] with you
[113:08] so Bingo I'm going to use my email
[113:12] login
[113:15] I'm gonna pray that everything okay I
[113:17] received the emails that's a good thing
[113:18] no spam nothing
[113:21] I remember the student dashboard I am
[113:23] nuts but the database is working
[113:25] um I am not a paid student so there's
[113:28] nothing much I can do oh I have to hide
[113:29] this
[113:31] actually
[113:33] yeah I just have to hide it one second
[113:38] yeah let's put the portal
[113:43] user dots
[113:45] user data that's
[113:48] user
[113:54] that's customer ID
[113:59] yeah we kind of want to do that
[114:02] uh to avoid any mistakes yeah just you
[114:06] know showing this button only to people
[114:08] who paid for the app already
[114:10] simple as this
[114:12] um
[114:16] see I would click here and boom I would
[114:19] have this payment page this is working
[114:21] you see here what you just did we
[114:22] activated the cell to that other price
[114:25] this is pretty cool try to save like 100
[114:27] bucks with the annual billing and you
[114:30] can just switch the price
[114:31] so obviously I'm not going to pull my
[114:33] credit card for 500 bucks here
[114:35] but uh we have pretty much everything up
[114:38] and running uh maybe I can
[114:40] trick the database to think I'm a
[114:42] registered I'm a pen user
[114:46] I mean let me see so we see the whole
[114:49] the whole round stuff
[114:58] come on
[115:00] already here
[115:08] all right I'm gonna be waiting mongodb
[115:20] um easy Korean
[115:22] we're going to go to the cluster
[115:28] a few deployments
[115:33] collection
[115:41] right here we are this is going to be a
[115:45] bit
[115:47] simple but we're going to say that user
[115:49] has access to the end
[115:56] and user has access and roll equal
[116:03] s
[116:05] would normally get more data but
[116:06] normally here when we refresh
[116:09] yeah no PDF has been published yet so
[116:12] there's no way we can do anything here
[116:13] but that's pretty much it and of course
[116:15] if we go here and we say that this
[116:17] person is actually a teacher so my wife
[116:20] we're going to refresh and she will be
[116:22] able to upload the file
[116:25] and let's say we're going to send this
[116:27] to our students
[116:32] so
[116:33] that would be simple if you worked right
[116:36] away
[116:39] um
[116:43] see if we got some logs in here
[116:49] is that the one modifier seems like it's
[116:52] the one
[117:00] [Music]
[117:02] and would that be
[117:07] he's dead
[117:11] read another try
[117:32] so he worked on old localhost but it
[117:35] doesn't work
[117:40] it does not work here
[117:46] maybe I didn't set up the keys No
[117:48] otherwise I wouldn't get the
[117:56] I'm gonna try
[117:58] that's what we got here
[118:02] all right so that works here
[118:04] it doesn't work
[118:07] I just woke up
[118:15] that's a good point I think my wife will
[118:17] be the first user of the platform and
[118:18] I'm pretty sure she's going to push to
[118:19] all the PDF
[118:21] good point
[118:24] um well we get an error here
[118:50] oh I'm gonna give it a try just whatever
[118:54] that'll be so wild if this would work
[119:06] but it's actually
[119:09] um
[119:11] God that wouldn't work
[119:24] I'm running into the same issue
[119:27] we think okay okay
[119:31] if I did the error yep I actually added
[119:33] them
[119:34] all that you guys are checking
[119:39] I'm making just a weird test real quick
[119:42] and and I'm gonna check it
[119:48] yeah I think my test is really stupid
[119:51] I don't know why I feel like
[119:54] uh
[119:57] oh yeah okay
[120:07] yep okay so I'm gonna revert
[120:13] getting four three okay so settings
[120:18] environment variables they are supposed
[120:20] to be here AWS
[120:23] public key private key
[120:28] um I do a double check real quick making
[120:31] sure they're correct
[120:47] I think the keys are correct
[120:50] [ __ ] yeah they're correct
[121:15] okay uh that's it at the end the last
[121:19] thing just to upload the PDF
[121:27] hitters
[121:30] that's a very long URL
[121:40] Street
[121:43] like I have no idea how to debug this
[121:45] right now
[121:48] prefer
[121:51] is that is that possible that
[121:55] somehow I would need
[122:04] if you guys have any clue why it's
[122:06] working on local but not working
[122:08] on the server uh
[122:12] yeah I mean
[122:19] it's weird
[122:36] oh I think here
[122:39] oh no maybe not no
[122:42] public list IP
[122:44] um
[122:56] did I authorize some
[123:01] some course issue let me see
[123:05] I think the court no I think the the
[123:07] request the pre-flight request goes well
[123:09] yeah this one goes this is a pre-flight
[123:11] request
[123:13] yep and it it goes well it's a 403
[123:23] in the chat is small
[123:26] come on
[123:39] why would this not work
[124:22] um we got no response we just gotta
[124:26] that's all I got
[124:34] I really don't know what to do with it
[124:46] and release
[125:00] the current bucket policy expired I
[125:04] don't think that's the case incorrect
[125:05] user permission
[125:08] mismatch region
[125:11] yeah the region is correct I just
[125:14] signature version yeah
[125:16] yeah that's the correct version uh
[125:55] who's back at it again
[125:58] yo Mr Wizard
[126:09] you guys you guys keep me alive I'll
[126:12] probably be chilling if
[126:14] if I didn't have to deliver on the
[126:16] Stream
[126:18] that is the end of it I have a little
[126:19] bug in the code that's not happening
[126:22] on my local server and it's happening in
[126:24] prod
[126:25] and that's the only missing part
[126:28] two I can close the stream properly
[126:32] and this is happening God damn it
[126:43] I'm not gonna be able to sleep tonight
[126:45] if I cannot fix this
[126:49] um
[127:09] is that it
[127:14] okay
[127:15] a [ __ ] last little bug why isn't it
[127:19] God damn it
[127:30] wait I'm not receiving
[127:37] wait wait wait what's going on
[127:46] okay I'm not even receiving the emails
[127:47] that's strange
[127:49] oh maybe I'm logged in
[128:11] God damn it
[129:03] and
[129:05] foreign
[129:10] credentials
[129:18] I have no idea what's causing this
[129:23] but you're making a call from a
[129:25] different domain instead of the locals
[129:27] wondering if you have the permission to
[129:28] go from easycare interior
[129:31] from Easy Korean tier it will just
[129:33] config okay let me show you my bucket
[129:36] policies
[129:39] uh this is the bucket I'm calling
[129:44] and these are the policies
[129:49] go from different
[129:52] you have the permission to call
[129:55] easy Korean
[130:02] [Laughter]
[130:04] event is a legendary
[130:26] [ __ ]
[130:51] maybe I go crazy and I just drop this
[130:54] right here
[130:56] ready
[130:57] did that change anything
[131:23] another try
[131:32] 403 still
[131:43] on this animation unversal and not the
[131:46] right ones I can think of anything
[131:47] you're a little more routine so
[131:49] of course are fine by the way you should
[131:51] restrict those domains
[131:54] oh yeah yeah
[131:59] it's correct
[132:01] yeah of course he's fine
[132:10] the region is fine
[132:15] I honestly don't know they'll be a shame
[132:17] to close this just like this
[132:21] check on your pocket if you have a Block
[132:23] online
[132:35] AWS yep
[132:37] I think
[132:39] S3 get objects yeah I think it's kind of
[132:42] what I have now
[132:49] I think
[132:53] like all public access oh yeah that
[132:56] thing yeah
[132:57] yeah
[132:58] I think it allows every
[133:02] yeah everything is authorized
[133:11] all right I'm stuck with this
[133:23] okay I think I'll move on if uh unless
[133:25] anyone has an ID someone saving the chat
[133:29] it's great
[133:32] to bring it by allowing all four tests
[133:35] how would you how would you actually
[133:36] debug this thing
[133:40] oh okay
[133:44] and oh all right so yeah because I'm a
[133:46] really newbie with S3 how would I
[133:48] actually allow
[133:50] everyone
[133:51] do anything
[134:51] the loneliness in this guy here
[134:54] that he's able I cannot close the stream
[134:57] because of one little bug
[135:00] adjustment of Quick Test here
[135:03] okay
[135:05] so it's a 403
[135:09] could I miss is there why would I meet I
[135:12] have
[135:14] recurred myness about message okay
[135:17] I have these config oh wait
[135:21] public what what what what what
[135:30] is it
[135:34] wait I get it this makes no sense
[135:38] my S3 instance
[135:46] what is going on these
[135:49] is the config file
[135:52] and these is supposed to have
[135:55] the public and private key but he does
[135:59] it he does not have those
[136:02] of course students have what the hell is
[136:04] going on how can I even make something
[136:06] work in there
[136:09] what the hell
[136:12] I think we've got it ladies and
[136:13] gentlemen uh
[136:15] process
[136:20] let me one second I just need to
[136:22] remember the name
[136:24] of my keys I'm gonna turn this up for a
[136:28] second
[136:45] that's the question what have how does
[136:47] it even worked on localhost I have no
[136:49] idea man
[136:51] this is extremistry
[136:53] I'm not saying it's strange and I'm
[136:55] always wrong at the end it's probably
[136:57] some buggy whatever I did
[136:59] I mean it's private key and we have the
[137:02] private key
[137:03] access keyboard no that supposed to be
[137:06] the public here yes
[137:08] we're going to give it another run uh
[137:10] actually because that thing should be
[137:11] working
[137:13] I'm gonna give you two try here I'm
[137:15] gonna try with this with this and
[137:16] without oh
[137:19] upload this
[137:24] okay so I'm going to remove that
[137:28] wait no um what what what did you mark
[137:33] that's my book kids my content type here
[137:36] okay I need to remove that okay
[137:38] fine go ahead remove it
[137:46] okay so this is this is working from
[137:50] some kind of miracle
[137:53] so I changed that and I'm gonna push it
[137:57] weird
[138:00] all right ladies and Gentlemen We Are
[138:03] trying to write something here as a
[138:05] history the weirdest Amazon AWS thing
[138:10] let's see again
[138:14] easy Korean dashboard okay
[138:21] close drive I can
[138:24] uh I can close Twitter
[138:27] people should pass
[138:30] common Universal deploy that thing
[138:33] ready is it are you sure no it's not
[138:36] ready
[138:40] foreign
[138:45] let me let me go
[138:57] all right this is live
[139:00] let's pray
[139:08] yes
[139:11] yes
[139:13] it is working
[139:15] so yeah it was just a weird miracle
[139:19] we have the PDF we can download it
[139:23] ah God finally
[139:27] uh sister pleasure we're gonna be able
[139:28] to leave the Stream
[139:30] and we got the email here that's perfect
[139:33] and yeah of course I haven't paid so my
[139:35] name is undefined I can clean
[139:38] there we go
[139:41] okay
[139:43] uh
[139:47] Moment of Truth that's exactly it
[139:50] Bingo where we got it uh well hold on
[139:53] was at 7 pm we started at nine yeah
[139:55] staying out 10 hours of stream uh still
[139:58] a little bit long I had meet it's very
[140:00] uh uncommon for me to comment what I do
[140:03] in my code so I uh I think I'm I'm
[140:06] slower when I talk but it was so fun
[140:09] because uh and I was just so fine to
[140:11] finally get to see some of you Twitter
[140:14] in here uh it's more real it's more fun
[140:17] uh we get the call from Tebow who saved
[140:20] me we got
[140:21] um I forget the name but we got someone
[140:23] who uh found that weird book in in the
[140:26] S3 buckets uh
[140:30] yeah that was just so cool guys I'm so
[140:33] grateful all of you join uh it's a real
[140:35] pleasure
[140:36] um it's a little promo here
[140:38] um of course but I'm working on um this
[140:42] app called chipmast
[140:43] uh this is what I just used to build
[140:46] this mini startup on my wife uh it's a
[140:49] baller plate made with Nexus that
[140:51] um packed a lot of the boring stuff and
[140:55] make it simpler so you can ship your
[140:57] startups faster
[140:59] um
[141:00] hope you enjoyed the stream uh I'm gonna
[141:02] be doing this uh a few more times if you
[141:04] guys like it that's pretty fun and uh in
[141:07] the meantime we're gonna stay in touch
[141:08] on Twitter
[141:09] there's any uh anything together want to
[141:12] go over
[141:13] before
[141:15] this man gets at life and and go I'm
[141:18] going on a date with my wife in a
[141:19] restaurant
[141:27] I think the chat is kind of delayed
[141:33] I think I'm just gonna close the stream
[141:35] then
[141:36] um well thank you so so much everyone
[141:37] for tuning in
[141:38] um
[141:39] I love you all it was so nice and I'll
[141:42] see you in another stream
[141:46] cheers